(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{69:function(t,e,n){"use strict";var a={props:{email:{type:String}},data:function(){return{}},methods:{accept:function(){this.$emit("accept")},cancel:function(){this.$emit("cancel")}},created:function(){}},i=n(9),s=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("\n            Delete\n        ")]),t._v(" "),n("v-card-text",[t._v("\n            Are you sure you want to remove "+t._s(t.email)+"?\n        ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.cancel}},[t._v("\n            Disagree\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.accept}},[t._v("\n            Agree\n        ")])],1)],1)],1)}),[],!1,null,null,null);e.a=s.exports},78:function(t,e,n){"use strict";n.r(e);var a={props:{appointment:{}},data:function(){return{menu1:!1,appointmentDetails:[],mindate:(new Date).toString(),isfetching:!0,departments:[],ischange:!0}},methods:{checkdata:function(){this.appointment.appt_date==this.appointmentDetails.appt_date&&this.appointment.department_id==this.appointmentDetails.department_id?this.ischange=!0:this.ischange=!1},getAllDepartment:function(){var t=this;axios.get("/admin/department/all").then((function(e){var n=e.data;t.departments=n}))},save:function(){this.appointment.appt_date!=this.appointmentDetails.appt_date&&this.appointment.department_id!=this.appointmentDetails.department_id?this.appointmentDetails.both=!0:(this.appointment.appt_date==this.appointmentDetails.appt_date&&this.appointment.department_id!=this.appointmentDetails.department_id&&(this.appointmentDetails.isdepartment=!0),this.appointment.appt_date!=this.appointmentDetails.appt_date&&this.appointment.department_id==this.appointmentDetails.department_id&&(this.appointmentDetails.isdate=!0)),this.$emit("update",this.appointmentDetails)}},created:function(){this.getAllDepartment()},computed:{noChanges:function(){return this.appointment.appt_date==this.appointmentDetails.appt_date&&this.appointment.department_id==this.appointmentDetails.department_id}},watch:{appointment:{handler:function(t){this.appointmentDetails=[],this.ischange=!0,Object.assign(this.appointmentDetails,t),this.isfetching=!1},deep:!0}}},i=n(9);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r={components:{SideForm:Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isfetching?t._e():n("v-card",{staticClass:"mt-3"},[n("v-card-title",[t._v("Move Appointment")]),t._v(" "),n("v-card-text",[n("v-container",[n("v-layout",{attrs:{wrap:"",row:""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Last name ")]),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{solo:"",dense:"",disabled:""},model:{value:t.appointmentDetails.lname,callback:function(e){t.$set(t.appointmentDetails,"lname",e)},expression:"appointmentDetails.lname"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("First name ")]),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{solo:"",dense:"",disabled:""},model:{value:t.appointmentDetails.fname,callback:function(e){t.$set(t.appointmentDetails,"fname",e)},expression:"appointmentDetails.fname"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Email ")]),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{solo:"",dense:"",disabled:""},model:{value:t.appointmentDetails.email,callback:function(e){t.$set(t.appointmentDetails,"email",e)},expression:"appointmentDetails.email"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Mobile number ")]),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{solo:"",dense:"",disabled:""},model:{value:t.appointmentDetails.mobile_number,callback:function(e){t.$set(t.appointmentDetails,"mobile_number",e)},expression:"appointmentDetails.mobile_number"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Person to Visit ")]),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{solo:"",dense:"",disabled:""},model:{value:t.appointmentDetails.PTV,callback:function(e){t.$set(t.appointmentDetails,"PTV",e)},expression:"appointmentDetails.PTV"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Department ")]),t._v(" "),n("br"),t._v(" "),n("v-autocomplete",{attrs:{items:t.departments,"item-text":"short_name","item-value":"id",solo:"","single-line":"","allow-overflow":"",dense:""},on:{change:t.checkdata},model:{value:t.appointmentDetails.department_id,callback:function(e){t.$set(t.appointmentDetails,"department_id",e)},expression:"appointmentDetails.department_id"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-label",[t._v("Appointment date ")]),t._v(" "),n("br"),t._v(" "),n("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-text-field",t._g(t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",readonly:"",name:"appointment date",color:"success"},model:{value:t.appointmentDetails.appt_date,callback:function(e){t.$set(t.appointmentDetails,"appt_date",e)},expression:"appointmentDetails.appt_date"}},"v-text-field",i,!1),a))]}}],null,!1,588484133),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",min:t.appointment.appt_date},on:{change:t.checkdata,input:function(e){t.menu1=!1}},model:{value:t.appointmentDetails.appt_date,callback:function(e){t.$set(t.appointmentDetails,"appt_date",e)},expression:"appointmentDetails.appt_date"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md12:""}},[n("v-label",[t._v("Reason "),n("span",[t._v("*")])]),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.errors.first("reason")))]),t._v(" "),n("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"reason",solo:"",height:"70",disabled:""},model:{value:t.appointmentDetails.reason,callback:function(e){t.$set(t.appointmentDetails,"reason",e)},expression:"appointmentDetails.reason"}})],1)],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",disabled:t.ischange},on:{click:t.save}},[t._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports,DialogConfirmation:n(69).a},data:function(){return{isdelete:!1,drawer:!1,appointments:[],user:[],isfetching:!0,selectedAppointment:[],isprocessing:!1}},methods:{getAppointments:function(){var t=this;this.isfetching=!0,axios.get("/admin/appointment/waiting/".concat(this.user.id)).then((function(e){var n=e.data;t.appointments=n,t.isfetching=!1}))},getAuthuser:function(){var t=this;axios.get("/auth/user").then((function(e){var n=e.data;console.log(n,"user"),t.user=n,t.getAppointments()}))},accept:function(t){var e=this;this.isprocessing=!0,t.user_id=this.user.id;var n=t;axios.put("/admin/accept/appointment",o({},n)).then((function(t){t.data;e.getAppointments(),e.isprocessing=!1,e.$toast.open({message:"Appointment of ".concat(n.lname+" "+n.fname," is successfully updated"),position:"top-right",type:"success",duration:5e3})}))},update:function(t){var e=this;this.drawer=!1,this.isprocessing=!0,axios.put("/admin/move/appointment",o({},t)).then((function(n){n.data;e.getAppointments(),e.isprocessing=!1,e.$toast.open({message:"Appointment of ".concat(t.lname+" "+t.fname," is successfully moved"),position:"top-right",type:"success",duration:5e3})}))},cancel:function(){this.isdelete=!1},confirm:function(){var t=this;this.isdelete=!1,this.isprocessing=!0,axios.delete("/admin/remove/appointment/".concat(this.selectedAppointment.id)).then((function(e){e.data;t.getAppointments(),t.isprocessing=!1,t.$toast.open({message:"Appointment of ".concat(t.selectedAppointment.lname+" "+t.selectedAppointment.fname," is successfully removed"),position:"top-right",type:"success",duration:5e3})}))}},created:function(){this.getAuthuser()}},l=Object(i.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:"",width:"700"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("side-form",{attrs:{appointment:t.selectedAppointment},on:{update:t.update}})],1),t._v(" "),n("v-card",{attrs:{elevation:"1",loading:t.isprocessing}},[n("v-card-title",[t._v("\n        For Approval\n      ")]),t._v(" "),n("v-card-text",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n              Name\n            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n              Email\n            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n              Mobile number\n            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n              Date\n            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n              Person to visit\n            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n              Reason\n            ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n              Department\n            ")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("\n              Action\n            ")])])]),t._v(" "),n("tbody",t._l(t.appointments,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.fname+" "+e.lname))]),t._v(" "),n("td",[t._v(t._s(e.email))]),t._v(" "),n("td",[t._v(t._s(e.mobile_number))]),t._v(" "),n("td",[t._v(t._s(e.appt_date))]),t._v(" "),n("td",[t._v(t._s(e.PTV))]),t._v(" "),n("td",[t._v(t._s(e.reason))]),t._v(" "),n("td",{staticClass:"text-center"},[t._v(t._s(e.department.short_name))]),t._v(" "),n("td",{staticClass:"text-center"},[n("v-btn",{attrs:{fab:"","x-small":"",color:"primary",disabled:t.isprocessing},on:{click:function(n){return t.accept(e)}}},[n("v-icon",[t._v("mdi-check")])],1),t._v(" "),n("v-btn",{attrs:{fab:"","x-small":"",color:"success",disabled:t.isprocessing},on:{click:function(n){t.selectedAppointment=e,t.drawer=!0}}},[n("v-icon",[t._v(" mdi-pencil ")])],1),t._v(" "),n("v-btn",{attrs:{fab:"","x-small":"",color:"error",disabled:t.isprocessing},on:{click:function(n){t.selectedAppointment=e,t.isdelete=!0}}},[n("v-icon",[t._v(" mdi-delete ")])],1)],1)])})),0)]},proxy:!0}])})],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:t.isdelete,callback:function(e){t.isdelete=e},expression:"isdelete"}},[n("dialog-confirmation",{attrs:{email:t.selectedAppointment.email},on:{cancel:t.cancel,accept:t.confirm}})],1)],1)}),[],!1,null,null,null);e.default=l.exports}}]);