(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{69:function(e,t,a){"use strict";var s={props:{email:{type:String}},data:function(){return{}},methods:{accept:function(){this.$emit("accept")},cancel:function(){this.$emit("cancel")}},created:function(){}},r=a(9),i=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n            Delete\n        ")]),e._v(" "),a("v-card-text",[e._v("\n            Are you sure you want to remove "+e._s(e.email)+"?\n        ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.cancel}},[e._v("\n            Disagree\n        ")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.accept}},[e._v("\n            Agree\n        ")])],1)],1)],1)}),[],!1,null,null,null);t.a=i.exports},77:function(e,t,a){"use strict";a.r(t);var s={props:{isupdate:{type:Boolean},user:{}},data:function(){return{userDetails:[],departments:[],roles:[],hasusername:!1,hasemail:!1}},methods:{getAllDepartment:function(){var e=this;axios.get("/admin/department/all").then((function(t){var a=t.data;e.departments=a}))},getAllRole:function(){var e=this;axios.get("/admin/role/all").then((function(t){var a=t.data;e.roles=a}))},store:function(){var e=this;this.$validator.validateAll().then((function(t){t&&e.$emit("store",e.userDetails)}))},update:function(){this.$emit("update",this.userDetails)},checkUsername:function(){var e=this;if(this.userDetails.username){var t=this.userDetails.username;axios.post("/admin/check/username",{username:t}).then((function(t){var a=t.data;a?e.isupdate&&e.userDetails.id==a.id?e.hasusername=!1:e.hasusername=!0:e.hasusername=!1}))}},checkEmail:function(){var e=this;if(this.userDetails.email){var t=this.userDetails.email;axios.post("/admin/check/email",{email:t}).then((function(t){var a=t.data;a?e.isupdate&&e.userDetails.id==a.id?e.hasemail=!1:e.hasemail=!0:e.hasemail=!1}))}}},watch:{user:{handler:function(e){if(!this.isupdate)return this.userDetails=[];Object.assign(this.userDetails,e)},deep:!0}},computed:{},created:function(){this.getAllDepartment(),this.getAllRole()}},r=a(9);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={components:{createForm:Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"mt-3"},[a("v-card-title",[e._v("Add User")]),e._v(" "),a("v-card-text",[a("v-container",[a("v-layout",{attrs:{wrap:"",row:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Last name ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("last name")))]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",name:"last name"},model:{value:e.userDetails.lastname,callback:function(t){e.$set(e.userDetails,"lastname",t)},expression:"userDetails.lastname"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("First name ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("first name")))]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",name:"first name"},model:{value:e.userDetails.firstname,callback:function(t){e.$set(e.userDetails,"firstname",t)},expression:"userDetails.firstname"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Email ")]),e._v(" "),a("br"),e._v(" "),e.hasemail?a("span",{staticStyle:{color:"red"}},[e._v("Email is already taken")]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("first name")))]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",name:"email"},on:{keyup:e.checkEmail},model:{value:e.userDetails.email,callback:function(t){e.$set(e.userDetails,"email",t)},expression:"userDetails.email"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Username ")]),e._v(" "),a("br"),e._v(" "),e.hasusername?a("span",{staticStyle:{color:"red"}},[e._v("Username is already taken")]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("username")))]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",name:"username"},on:{keyup:e.checkUsername},model:{value:e.userDetails.username,callback:function(t){e.$set(e.userDetails,"username",t)},expression:"userDetails.username"}})],1),e._v(" "),e.isupdate?a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Password ")]),e._v(" "),a("br"),e._v(" "),a("v-text-field",{attrs:{solo:"",dense:""},model:{value:e.userDetails.password,callback:function(t){e.$set(e.userDetails,"password",t)},expression:"userDetails.password"}})],1):a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Password ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("password")))]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{solo:"",dense:"",name:"password"},model:{value:e.userDetails.password,callback:function(t){e.$set(e.userDetails,"password",t)},expression:"userDetails.password"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Role ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("role")))]),e._v(" "),a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.roles,"item-text":"name","item-value":"id",solo:"","single-line":"","allow-overflow":"",dense:"",name:"role"},model:{value:e.userDetails.role_id,callback:function(t){e.$set(e.userDetails,"role_id",t)},expression:"userDetails.role_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-label",[e._v("Department ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.errors.first("department")))]),e._v(" "),a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.departments,"item-text":"short_name","item-value":"id",solo:"","single-line":"","allow-overflow":"",dense:"",name:"department"},model:{value:e.userDetails.department_id,callback:function(t){e.$set(e.userDetails,"department_id",t)},expression:"userDetails.department_id"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),e.isupdate?a("v-btn",{attrs:{color:"primary",disabled:e.hasemail||e.hasusername},on:{click:e.update}},[e._v("\n                Update\n            ")]):a("v-btn",{attrs:{color:"primary",disabled:e.hasemail||e.hasusername},on:{click:e.store}},[e._v("\n                Submit\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports,DialogConfirmation:a(69).a},data:function(){return{users:{},drawer:!1,isremove:!1,selecteduser:[],isupdate:!1}},created:function(){this.getallactiveuser()},methods:{getallactiveuser:function(){var e=this;axios.get("/admin/user/active").then((function(t){var a=t.data;console.log(a),e.users=a}))},removeUser:function(){var e=this,t=this.selecteduser.id;axios.delete("/admin/user/remove/".concat(t)).then((function(t){t.data;e.getallactiveuser(),e.selecteduser=[],e.isremove=!1,e.$toast.open({message:"".concat(e.selecteduser.email," was delete successfully"),position:"top-right",type:"success",duration:5e3})}))},cancel:function(){this.isremove=!1},store:function(e){var t=this;axios.post("/admin/add/user",n({},e)).then((function(a){a.data;t.getallactiveuser(),t.drawer=!1,t.$toast.open({message:"".concat(e.email," was added successfully"),position:"top-right",type:"success",duration:5e3})}))},update:function(e){var t=this;axios.put("/admin/update/user",n({},e)).then((function(a){a.data;t.getallactiveuser(),t.drawer=!1,t.$toast.open({message:"".concat(e.email," was updated successfully"),position:"top-right",type:"success",duration:5e3})}))}}},c=Object(r.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:"",width:"700"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("create-form",{attrs:{isupdate:e.isupdate,user:e.selecteduser},on:{store:e.store,update:e.update}})],1),e._v(" "),a("v-card",{attrs:{elevation:"1"}},[a("v-card-title",[e._v("\n        Active Users \n        "),a("span",{staticClass:"ml-2"},[a("v-btn",{attrs:{fab:"","x-small":"",color:"white"},on:{click:function(t){e.selecteduser=[],e.isupdate=!1,e.drawer=!e.drawer}}},[a("v-icon",[e._v("mdi-plus")])],1)],1)]),e._v(" "),a("v-card-text",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("\n                    Lastname\n                    ")]),e._v(" "),a("th",{staticClass:"text-left"},[e._v("\n                    Firstname\n                    ")]),e._v(" "),a("th",{staticClass:"text-left"},[e._v("\n                    Department\n                    ")]),e._v(" "),a("th",{staticClass:"text-left"},[e._v("\n                    Email\n                    ")]),e._v(" "),a("th",{staticClass:"text-left"},[e._v("\n                    Username\n                    ")]),e._v(" "),a("th",{staticClass:"text-left"},[e._v("\n                    Role\n                    ")]),e._v(" "),a("th",{staticClass:"text-center"},[e._v("\n                    Action\n                    ")])])]),e._v(" "),a("tbody",e._l(e.users,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.lastname))]),e._v(" "),a("td",[e._v(e._s(t.firstname))]),e._v(" "),a("td",[e._v(e._s(t.department.short_name))]),e._v(" "),a("td",[e._v(e._s(t.email))]),e._v(" "),a("td",[e._v(e._s(t.username))]),e._v(" "),a("td",[e._v(e._s(t.role.name))]),e._v(" "),a("td",{staticClass:"text-center"},[a("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"success"},on:{click:function(a){e.selecteduser=t,e.isupdate=!0,e.drawer=!0}}},[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-pencil ")])],1),e._v(" "),a("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(a){e.selecteduser=t,e.isremove=!0}}},[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-delete ")])],1)],1)])})),0)]},proxy:!0}])})],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.isremove,callback:function(t){e.isremove=t},expression:"isremove"}},[a("dialog-confirmation",{attrs:{user:e.selecteduser.email},on:{accept:e.removeUser,cancel:e.cancel}})],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);